<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="shortcut icon" href="{{ '/assets/favicons/favicon.ico' }}" />
    <link rel="icon" type="image/png" href="{{ '/assets/favicons/favicon-32x32.png' | url }}" sizes="32x32" />
    <link rel="icon" type="image/png" href="{{ '/assets/favicons/android-chrome-192x192.png' | url }}" sizes="192x192" />
    <link rel="icon" type="image/png" href="{{ '/assets/favicons/android-chrome-512x512.png' | url }}" sizes="512x512" />
    {# ios support #}
    <link rel="apple-touch-icon" href="{{ '/assets/favicons/apple-touch-icon.png' | url }}" />
    <meta name="apple-mobile-web-app-status-bar" content="#333333" />
    
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; child-src 'none';" />
    <meta name="color-scheme" content="light dark" />

    {% set authorImage = metadata.url + "/assets/images/profile-pic.jpg" | url %}

    {% set socialImage = metadata.url + image if image != undefined else authorImage %}

    {% set currentPageUrl = metadata.url + page.url | url %}

    {% set secondTitle = "" if page.url === "/" else " - " + title %}
    {% set keywords = keywords or "CSS, front-end, web design, consulting, architecture" %}
    
    <title>{{ metadata.metaTitle + secondTitle }}</title>
    <meta name="keywords" content="{{ keywords }}" />
    <meta name="description" content="{{ excerpt or metadata.description }}" />

    <meta name="og:image" content="{{ socialImage }}">
    <meta name="og:image:secure_url" content="{{ socialImage }}">
    <meta property="og:image:width" content="1024">
    <meta property="og:image:height" content="512">
    <meta property="article:published_time" content="{{ date }}">
    <meta property="article:modified_time" content="{{ date }}">

    <meta name="og:title" content="{{ metadata.metaTitle + secondTitle }}">
    <meta name="og:description" content="{{ excerpt or metadata.description }}">
    <meta name="og:url" content="{{ currentPageUrl }}">
    <meta name="og:site_name" content="{{ metadata.metaTitle }}">
    <meta name="og:locale" content="en_GB">
    <meta name="og:type" content="article">

    <meta name="twitter:title" content="{{ metadata.metaTitle + secondTitle }}">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:description" content="{{ excerpt or metadata.description }}">
    <meta name="twitter:image" content="{{ socialImage }}">

    <meta name="generator" content="{{ eleventy.generator }}">

    <meta itemprop="name" content="{{ metadata.metaTitle + secondTitle }}">
    <meta itemprop="description" content="{{ excerpt or metadata.description }}">

    <link rel="stylesheet" href="{{ '/assets/css/styles.css' | cacheBuster }}">
    <link rel="alternate" href="{{ metadata.url + metadata.feed.path }}" type="application/atom+xml" title="{{ metadata.title }}" />
    <link rel="alternate" href="{{ metadata.url + metadata.jsonfeed.path }}" type="application/json" title="{{ metadata.title }}" />

    <link rel="manifest" href="/manifest.json">

    {% if page.url === "/posts/" %}
      <script type="application/ld+json">
      {
          "@context": "https://schema.org",
          "@type": "CollectionPage",
          "mainEntity": {
              "@type": "ItemList",
              "itemListElement": [{% for post in collections.posts | reverse %}
                  {
                    "@type": "ListItem",
                    "position": {{loop.index}},
                    "url": "{{ metadata.url + post.url | url }}",
                    "name": "{{ post.data.title }}"
                  }{% if loop.last === false %},{% endif %}{% endfor %}
              ]
          },
          "headline": "List of Blog Posts",
          "description": "Explore the collection of blog posts from Learn with Gurpreet.",
          "publisher": {
              "@type": "Organization",
              "name": "Learn with Gurpreet",
              "logo": {
                  "@type": "ImageObject",
                  "url": "{{ socialImage }}",
                  "width": 1024,
                  "height": 512
              }
          },
          "url": "{{ currentPageUrl }}",
          "inLanguage": "en_GB"
      }
      </script>
    {% endif %}

    {% if '/posts/' in page.url and page.url !== "/posts/" %}
      <script type="application/ld+json">
      {
          "@context": "https://schema.org",
          "@type": "Article",
          "mainEntity": {
              "@type": "WebPage",
              "@id": "{{ currentPageUrl }}"
          },
          "headline": "{{ title }}",
          "description": "{{ excerpt or metadata.description }}",
          "image": "{{ socialImage }}",
          "author": {
              "@type": "Person",
              "name": "{{ metadata.author.name }}",
              "url": "{{ metadata.author.mastodon }}"
          },
          "datePublished": "{{ date }}",
          "dateModified": "{{ date }}",
          "publisher": {
              "@type": "Organization",
              "name": "{{ metadata.metaTitle }}",
              "logo": {
                  "@type": "ImageObject",
                  "url": "{{ authorImage }}",
                  "width": 500,
                  "height": 500
              }
          },
          "keywords": "{{ keywords }}",
          "articleSection": "{{ tags }}",
          "url": "{{ currentPageUrl }}",
          "inLanguage": "en_GB"
      }
      </script>
    {% endif %}
  </head>
  <body class="bg-white text-black dark:bg-gray-400 dark:text-gray-100 flex flex-col h-screen justify-between">
    <a href="#content" class="skip-link p-2 absolute text-center left-0 right-0 bg-gray-50 text-black -translate-y-full transition-transform duration-200 focus:z-20 focus:translate-y-0">Skip to main content</a>
    {% include "components/header.njk" %}
    <main class="mb-auto" id="content">
      {% block content %}{% endblock %}
    </main>
    {% include "components/footer.njk" %}
    <script src="{{ '/assets/js/script.js' | cacheBuster }}"></script>
    <script defer src="/_vercel/insights/script.js"></script>
  </body>
</html>
