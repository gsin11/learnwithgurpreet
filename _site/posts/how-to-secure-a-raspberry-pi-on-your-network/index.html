<!doctype html><html lang="en"><head><meta charset="utf-8"><link rel="shortcut icon" href="/assets/favicons/favicon.ico"><link rel="icon" type="image/png" href="/assets/favicons/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="/assets/favicons/android-chrome-192x192.png" sizes="192x192"><link rel="icon" type="image/png" href="/assets/favicons/android-chrome-512x512.png" sizes="512x512"><link rel="apple-touch-icon" href="/assets/favicons/apple-touch-icon.png"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="color-scheme" content="light dark"><meta name="msapplication-TileColor" content="#F9FAFB"><meta name="theme-color" content="#F9FAFB"><title>Learn with Gurpreet - How to secure a Raspberry Pi on your network</title><meta name="keywords" content="CSS, front-end, web design, consulting, architecture"><meta name="description" content="If you are planning to expose your RaspberryPi over the internet, you should consider these security guidelines."><meta name="og:image" content="https://learnwithgurpreet.com/assets/images/cover2.jpg"><meta name="og:title" content="Learn with Gurpreet - How to secure a Raspberry Pi on your network"><meta name="og:description" content="If you are planning to expose your RaspberryPi over the internet, you should consider these security guidelines."><meta name="og:url" content="https://learnwithgurpreet.com/posts/how-to-secure-a-raspberry-pi-on-your-network/"><meta name="og:site_name" content="Learn with Gurpreet"><meta name="og:locale" content="en_GB"><meta name="og:type" content="article"><meta name="twitter:title" content="Learn with Gurpreet - How to secure a Raspberry Pi on your network"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:description" content="If you are planning to expose your RaspberryPi over the internet, you should consider these security guidelines."><meta name="twitter:image" content="https://learnwithgurpreet.com/assets/images/cover2.jpg"><meta name="generator" content="Eleventy v2.0.1"><meta itemprop="name" content="Learn with Gurpreet - How to secure a Raspberry Pi on your network"><meta itemprop="description" content="If you are planning to expose your RaspberryPi over the internet, you should consider these security guidelines."><link rel="stylesheet" href="/assets/css/styles.css?v=1681830158617"><link rel="alternate" href="https://learnwithgurpreet.com/feed/feed.xml" type="application/atom+xml" title="gS"><link rel="alternate" href="https://learnwithgurpreet.com/feed/feed.json" type="application/json" title="gS"><script>const prefDark = window.matchMedia('(prefers-color-scheme: dark)');
      document
        .querySelector('meta[name="theme-color"]')
        .setAttribute('content', prefDark ? '#111827' : '#F9FAFB');
      document
        .querySelector('meta[name="msapplication-TileColor"]')
        .setAttribute('content', prefDark ? '#111827' : '#F9FAFB');</script></head><body><main class="w-full mx-auto flex flex-grow flex-col post-content"><header class="flex flex-col my-5 max-w-7xl mx-auto w-full px-5"><div class="flex justify-between items-center gap-5 flex-col sm:flex-row mb-4 lg:mb-11"><a class="block font-semibold text-3xl text-teal-600 dark:text-teal-500" href="/">gS</a><nav><div class="fade flex gap-4 flex-wrap items-start justify-start"><a class="underline" href="/posts/">Posts</a> <a class="underline" href="/tags/">Tags</a> <a class="underline" href="/contact/">Contact</a> <a class="underline" href="/uses/">Uses</a> <a class="underline" href="/feed/feed.xml">RSS</a></div></nav></div></header><section class="items-center mb-6 gap-5 max-w-6xl mx-auto px-5 w-full"><h1>How to secure a Raspberry Pi on your network</h1><div class="text-sm text-gray-600 my-5 flex flex-col lg:flex-row gap-3 dark:text-gray-200 border-b border-b-gray-600 dark:border-b-gray-200 pb-8"><date class="slash" datetime="2022-05-14">May 14, 2022</date><span class="slash">6 min read</span> <span class="slash"><span><span class="text-teal-600 dark:text-teal-400">#</span><a href="/tags/privacy/">privacy</a></span><span><span class="text-teal-600 dark:text-teal-400">#</span><a href="/tags/raspberry-pi/">raspberry-pi</a></span></span></div><picture><source type="image/jpeg" srcset="/assets/images/6K2gBcvLaY-learwithgurpreet-400w.jpeg 400w, /assets/images/6K2gBcvLaY-learwithgurpreet-640w.jpeg 640w" sizes="100vw"><source type="image/webp" srcset="/assets/images/6K2gBcvLaY-learwithgurpreet-400w.webp 400w, /assets/images/6K2gBcvLaY-learwithgurpreet-640w.webp 640w" sizes="100vw"><img alt="Photo by Christina on Unsplash" loading="lazy" decoding="async" class="featured-image" src="/assets/images/6K2gBcvLaY-learwithgurpreet-400w.jpeg" width="640" height="427"></picture><p class="text-center text-sm text-gray-600 dark:text-gray-200">Photo by Christina on Unsplash</p><h2>What's Inside</h2><aside class="my-8 toc-container"><nav class="toc"><ol><li><a href="#installation">Installation</a></li><li><a href="#auto-updates">Auto Updates</a></li><li><a href="#user-management">User Management</a></li><li><a href="#firewall-setup">Firewall setup</a></li><li><a href="#prevent-brute-force-attack">Prevent brute-force attack</a></li><li><a href="#useful-commands">Useful commands</a></li></ol></nav></aside><article><p>If you are planning to expose your RaspberryPi over the internet, you should consider these security guidelines.</p><h2 id="installation" tabindex="-1"><a class="direct-link" href="#installation"><span>Installation</span></a></h2><p><strong>Use the official Image tool:</strong> You often find RaspberryPi images online from various sources. When it comes to security and privacy I would consider the official <a href="https://www.raspberrypi.com/software/">RaspberryPi imager</a> to install RaspberryPi OS.</p><p><img src="/assets/images/raspberry_pi_os_selection.jpg" alt="raspberry pi OS selection" loading="lazy"></p><p>OS selection in Raspberry PI Imager</p><p><strong>Password and SSH:</strong> Use advance options and change the default password. In case you are going to use it with SSH then consider enabling it while the installation process itself.</p><p><img src="/assets/images/raspberry_pi_advanced_options.jpg" alt="raspberry pi advanced options" loading="lazy"></p><p>Enabling SSH and new password from Advanced options</p><blockquote><p>However, you can later add <code>SSH</code> option by creating <code>ssh</code> file (without any extension) on the root.</p></blockquote><p><strong>Update and Upgrade all packages:</strong> The fact of having an open-source system is you will get lots of updates, I would recommend updating packages even after a fresh install. Log in with SSH and perform <code>sudo apt update -y &amp;&amp; sudo apt upgrade -y</code> this command will first pull a list of the latest packages and followed by the installation.</p><p>Note: If you want to check what all packages are being installed, simply remove -y from the end of both commands.</p><h2 id="auto-updates" tabindex="-1"><a class="direct-link" href="#auto-updates"><span>Auto Updates</span></a></h2><p>In the above-mentioned command, I showed you how to install the latest packages, but you need to do it manually. What if I give you an option where you don't need to perform manually but your Raspberry Pi will do it for you like Windows/Ubuntu.</p><pre class="language-bash"><code class="language-bash"><span class="token comment"># Install following package</span><br>$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> unattended-upgrades -y<br><br><span class="token comment"># After installation open following file</span><br>$ sudoedit /etc/apt/apt.conf.d/50unattended-upgrades<br><br><span class="token comment"># Add following given two lines</span><br><span class="token string">"origin=Raspbian,codename=<span class="token variable">${distro_codename}</span>,label=Raspbian"</span><span class="token punctuation">;</span><br><span class="token string">"origin=Raspberry Pi Foundation,codename=<span class="token variable">${distro_codename}</span>,label=Raspberry Pi Foundation"</span><span class="token punctuation">;</span></code></pre><p><img src="/assets/images/raspberry_pi_auto_updates-1024x542.jpg" alt="raspberry pi auto updates" loading="lazy"></p><p>Adding auto-update script configurations</p><p>These two lines will enable the package to pull the latest updates from Raspberry Pi official distros.</p><h2 id="user-management" tabindex="-1"><a class="direct-link" href="#user-management"><span>User Management</span></a></h2><p>Since now we are up to date with our packages and auto-updates, it's time to set up user rights.</p><p>Raspberry Pi comes with a default user pi which every hacker is aware of. To get rid of the obvious chance to get hacked is to create a new user.</p><pre class="language-bash"><code class="language-bash"><span class="token comment"># First, create new user (gurpreet is a new user)</span><br>$ <span class="token function">sudo</span> adduser gurpreet<br><br><span class="token comment"># Now add your user to the admin group</span><br>$ <span class="token function">sudo</span> gpasswd -a gurpreet adm<br><br><span class="token comment"># Also, provide sudo access to your user</span><br>$ <span class="token function">sudo</span> gpasswd -a gurpreet <span class="token function">sudo</span></code></pre><blockquote><p>I would suggest to test newly created user by opening new terminal window and try login, before closing your existing window.</p></blockquote><p>Try: <code>sudo whoami</code> to check sudo user and it should return <code>root</code> as output.</p><p>Job is not done here, we need to lock the default <code>pi</code> user as well.</p><pre class="language-bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">passwd</span> -l pi</code></pre><p>It will lock <code>pi</code> the user. We will not delete this user since some packages have <code>pi</code> user hard-coded users to perform admin-related operations.</p><h2 id="firewall-setup" tabindex="-1"><a class="direct-link" href="#firewall-setup"><span>Firewall setup</span></a></h2><p>After user management, you are quite safe than a normal Raspbian setup. Before opening your Raspberry Pi over the network, you should perform the following steps.</p><p>By default Raspberry Pi has open lots of ports for communication, sometimes hackers use these ports to get into your Raspberry Pi. In order to check, you can perform <code>netstat -an</code> command and see how many ports are open.</p><p>There are some packages that you can install to add a firewall, sometimes it gets very difficult to set up. I would recommend a package called <a href="https://help.ubuntu.com/community/UFW">UFW</a> which is quite easy to set up and is being widely used by industry-leading hosting companies like <a href="https://www.digitalocean.com/community/tutorials/how-to-set-up-a-firewall-with-ufw-on-ubuntu-20-04">Digital Ocean</a>.</p><pre class="language-bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> ufw -y</code></pre><p>After the installation, enable <code>SSH</code> as a very first thing because I believe you will be logged in via <code>SSH</code>.</p><pre class="language-bash"><code class="language-bash">$ <span class="token function">sudo</span> ufw allow <span class="token number">22</span>/tcp comment <span class="token string">"SSH"</span></code></pre><p>Default <code>SSH</code> port is <code>22</code> hence we need to enable it first. Tip: You can put a comment at the end, it will help you to understand the reason for enabling it when you open multiple ports.</p><p>You simply add more ports to the list, like <code>80/tcp</code> for any web server related operation like<br>Nginx, etc...</p><p>After adding all required ports, please enable <code>ufw</code> the firewall by triggering the following command.</p><pre class="language-bash"><code class="language-bash">$ <span class="token function">sudo</span> ufw <span class="token builtin class-name">enable</span></code></pre><p>It will immediately enable defined firewall rules on your Raspberry Pi. You can anytime check these defined rules with a command.</p><pre class="language-bash"><code class="language-bash">$ <span class="token function">sudo</span> ufw status numbered</code></pre><p><img src="/assets/images/raspberry_pi_ufw_status-1024x534.jpg" alt="UFW status" loading="lazy"></p><p><code>ufw</code> status command output</p><blockquote><p>Important: Before exiting, test your firewall setup by login in in new tab.</p></blockquote><h2 id="prevent-brute-force-attack" tabindex="-1"><a class="direct-link" href="#prevent-brute-force-attack"><span>Prevent brute-force attack</span></a></h2><p>After enabling our Raspberry Pi with firewall protection, I would still recommend enabling brute-force protection.</p><p>These days systems are capable enough to perform millions of calculations in a fraction of seconds. Hence some hackers are using such CPU processing to guess passwords. If your password is easy to guess, there could be a chance you were attacked by a brute-force attack.</p><p>To prevent our Raspberry Pi from a brute-force attack we need to install another package that will protect it from it.</p><pre class="language-bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> fail2ban -y</code></pre><p>After installing it you need to configure it for your personal use.</p><pre class="language-bash"><code class="language-bash"><span class="token comment"># Open fail2ban configuration file</span><br><br>$ sudoedit /etc/fail2ban/jail.local</code></pre><pre class="language-bash"><code class="language-bash"><span class="token comment"># Add following information</span><br><br><span class="token punctuation">[</span>DEFAULT<span class="token punctuation">]</span><br>bantime <span class="token operator">=</span> 1h<br>banaction <span class="token operator">=</span> ufw<br><br><span class="token punctuation">[</span>sshd<span class="token punctuation">]</span><br>enabled <span class="token operator">=</span> <span class="token boolean">true</span></code></pre><p>The above profile will disable the access for such users which are trying to guess your password more than 5 times.</p><p>Once you are done, please enable the service <code>sudo systemctl enable fail2ban</code></p><h2 id="useful-commands" tabindex="-1"><a class="direct-link" href="#useful-commands"><span>Useful commands</span></a></h2><p><code>$ sudo systemctl --type=service</code> // List of all services</p><p><code>$ sudo systemctl --type=service --status=active</code> // List of all active services</p><p><code>$ sudo systemctl disable &lt;service-name&gt;</code> // Disable service</p><p><code>$ sudo systemctl enable --now &lt;service-name&gt;</code> // It will enable the given service (right away, you don't have to restart pi)</p></article><a target="_blank" class="text-teal-700 dark:text-teal-400 mt-4 inline-block" rel="noopener noreferrer" href="https://github.com/learnwithgurpreet/learnwithgurpreet/blob/main/src/posts/how-to-secure-a-raspberry-pi-on-your-network.md">Edit post</a></section><section class="gap-1 p-1 my-5 lg:my-8 flex flex-col lg:flex-row justify-center lg:justify-between mx-5"><a class="flex-col items-start justify-center no-decoration" href="/posts/top-5-ways-to-structure-a-frontend-project/"><span class="text-sm uppercase">← Previous</span><h3>Top 5 ways to structure a frontend project</h3></a><a class="flex-col items-end justify-center text-right no-decoration" href="/posts/7-ways-to-make-your-website-more-accessible-and-sustainable/"><span class="text-sm uppercase">Next →</span><h3>7 ways to make your website more accessible and sustainable</h3></a></section></main><footer class="w-full bg-gray-700 border-t-4 border-teal-600 text-gray-50 flex justify-between text-sm p-4"><span class="italic flex-grow">©2023 Gurpreet Singh</span><nav class="flex gap-2"><a rel="me" class="text-gray-50 underline" href="https://mastodon.social/@gsin" title="Link to my Mastodon page">mastodon</a> <a rel="me" class="text-gray-50 underline" href="https://github.com/learnwithgurpreet" title="Link to my Github page">github</a> <a rel="me" class="text-gray-50 underline" href="/feed/feed.xml" title="Link to my RSS feed">RSS</a></nav></footer></body></html>