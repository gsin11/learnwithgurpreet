<!doctype html><html lang="en"><head><meta charset="utf-8"><link rel="shortcut icon" href="/assets/favicons/favicon.ico"><link rel="icon" type="image/png" href="/assets/favicons/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="/assets/favicons/android-chrome-192x192.png" sizes="192x192"><link rel="icon" type="image/png" href="/assets/favicons/android-chrome-512x512.png" sizes="512x512"><link rel="apple-touch-icon" href="/assets/favicons/apple-touch-icon.png"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="color-scheme" content="light dark"><meta name="msapplication-TileColor" content="#F9FAFB"><meta name="theme-color" content="#F9FAFB"><title>Learn with Gurpreet - Host your Strapi project</title><meta name="keywords" content="best hosting for strapi, best place to host strapi, host strapi, host strapi on heroku, host your strapi project app, host your strapi project as a service, host your strapi project site, how to host strapi"><meta name="description" content="In this article, I will walk you through the Strapi CMS setup on your local machine followed by deploying it to Heroku."><meta name="og:image" content="https://learnwithgurpreet.com/assets/images/ou46q3ChA-e1643359809377.webp"><meta name="og:title" content="Learn with Gurpreet - Host your Strapi project"><meta name="og:description" content="In this article, I will walk you through the Strapi CMS setup on your local machine followed by deploying it to Heroku."><meta name="og:url" content="https://learnwithgurpreet.com/posts/host-your-strapi-project/"><meta name="og:site_name" content="Learn with Gurpreet"><meta name="og:locale" content="en_GB"><meta name="og:type" content="article"><meta name="twitter:title" content="Learn with Gurpreet - Host your Strapi project"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:description" content="In this article, I will walk you through the Strapi CMS setup on your local machine followed by deploying it to Heroku."><meta name="twitter:image" content="https://learnwithgurpreet.com/assets/images/ou46q3ChA-e1643359809377.webp"><meta name="generator" content="Eleventy v2.0.1"><meta itemprop="name" content="Learn with Gurpreet - Host your Strapi project"><meta itemprop="description" content="In this article, I will walk you through the Strapi CMS setup on your local machine followed by deploying it to Heroku."><link rel="stylesheet" href="/assets/css/styles.css?v=1681830158616"><link rel="alternate" href="https://learnwithgurpreet.com/feed/feed.xml" type="application/atom+xml" title="gS"><link rel="alternate" href="https://learnwithgurpreet.com/feed/feed.json" type="application/json" title="gS"><script>const prefDark = window.matchMedia('(prefers-color-scheme: dark)');
      document
        .querySelector('meta[name="theme-color"]')
        .setAttribute('content', prefDark ? '#111827' : '#F9FAFB');
      document
        .querySelector('meta[name="msapplication-TileColor"]')
        .setAttribute('content', prefDark ? '#111827' : '#F9FAFB');</script></head><body><main class="w-full mx-auto flex flex-grow flex-col post-content"><header class="flex flex-col my-5 max-w-7xl mx-auto w-full px-5"><div class="flex justify-between items-center gap-5 flex-col sm:flex-row mb-4 lg:mb-11"><a class="block font-semibold text-3xl text-teal-600 dark:text-teal-500" href="/">gS</a><nav><div class="fade flex gap-4 flex-wrap items-start justify-start"><a class="underline" href="/posts/">Posts</a> <a class="underline" href="/tags/">Tags</a> <a class="underline" href="/contact/">Contact</a> <a class="underline" href="/uses/">Uses</a> <a class="underline" href="/feed/feed.xml">RSS</a></div></nav></div></header><section class="items-center mb-6 gap-5 max-w-6xl mx-auto px-5 w-full"><h1>Host your Strapi project</h1><div class="text-sm text-gray-600 my-5 flex flex-col lg:flex-row gap-3 dark:text-gray-200 border-b border-b-gray-600 dark:border-b-gray-200 pb-8"><date class="slash" datetime="2021-02-25">Feb 25, 2021</date><span class="slash">5 min read</span> <span class="slash"><span><span class="text-teal-600 dark:text-teal-400">#</span><a href="/tags/nodejs/">nodejs</a></span><span><span class="text-teal-600 dark:text-teal-400">#</span><a href="/tags/programming/">programming</a></span></span></div><picture><source type="image/jpeg" srcset="/assets/images/6PV7CUtn7h-learwithgurpreet-400w.jpeg 400w, /assets/images/6PV7CUtn7h-learwithgurpreet-640w.jpeg 640w" sizes="100vw"><source type="image/webp" srcset="/assets/images/6PV7CUtn7h-learwithgurpreet-400w.webp 400w, /assets/images/6PV7CUtn7h-learwithgurpreet-640w.webp 640w" sizes="100vw"><img alt="featured" loading="lazy" decoding="async" class="featured-image" src="/assets/images/6PV7CUtn7h-learwithgurpreet-400w.jpeg" width="640" height="336"></picture><p class="text-center text-sm text-gray-600 dark:text-gray-200"></p><h2>What's Inside</h2><aside class="my-8 toc-container"><nav class="toc"><ol><li><a href="#prerequisites">Prerequisites</a></li><li><a href="#setup-local-environment">Setup local environment</a><ol><li><a href="#local-postgre-database-setup">Local Postgre database setup</a></li><li><a href="#create-strapi-project">Create Strapi project</a></li></ol></li><li><a href="#setup-production-environment">Setup Production Environment</a></li><li><a href="#time-to-deploy">Time to Deploy 🤞</a><ol><li><a href="#facing-problems">Facing problems?</a></li></ol></li></ol></nav></aside><article><p>In this article, I will walk you through the <a href="https://learnwithgurpreet.com/my-first-strapi-project-experience/">Strapi CMS setup</a> on your local machine followed by deploying it to Heroku.</p><h2 id="prerequisites" tabindex="-1"><a class="direct-link" href="#prerequisites"><span>Prerequisites</span></a></h2><ul><li>Install Node.js 12.x (recommended 14.x).</li><li>Install <a href="https://www.postgresql.org/">PostgreSQL</a> on your local machine. (Tip: I would suggest going with the <a href="https://www.postgresql.org/download/">installer</a>).</li><li>install Heroku on your local machine, Check the documentation <a href="https://devcenter.heroku.com/articles/heroku-cli">Here</a>.</li></ul><h2 id="setup-local-environment" tabindex="-1"><a class="direct-link" href="#setup-local-environment"><span>Setup local environment</span></a></h2><p>If you want to use Heroku as a deployment server then I would suggest you choose PostgreSQL as a database option (however you have other options too).</p><h3 id="local-postgre-database-setup" tabindex="-1"><a class="direct-link" href="#local-postgre-database-setup"><span>Local Postgre database setup</span></a></h3><pre class="language-bash"><code class="language-bash">$ psql<br>$ CREATE DATABASE strapi_db<span class="token punctuation">;</span><br>$ CREATE <span class="token environment constant">USER</span> your_user_name WITH PASSWORD <span class="token string">'strong_password'</span><span class="token punctuation">;</span><br>$ GRANT ALL PRIVILEGES ON DATABASE strapi_db TO your_user_name<span class="token punctuation">;</span></code></pre><p>now you have a database setup on your local machine you are all set to install Strapi on your local machine.</p><h3 id="create-strapi-project" tabindex="-1"><a class="direct-link" href="#create-strapi-project"><span>Create Strapi project</span></a></h3><p>Create strapi project by using the following commands:</p><pre class="language-bash"><code class="language-bash"><span class="token comment"># Using yarn</span><br>$ <span class="token function">yarn</span> create strapi-app app<br><br><span class="token comment"># Using npx</span><br>$ npx create-strapi-app app</code></pre><blockquote><p>You can use the <code>--quickstart</code> parameter to go with the default setup which will create an SQLite database. Since we are going to deploy this on Heroku we shouldn’t include this param</p></blockquote><p>After running the above command you can start your local server by running <code>npm run develop</code> and it will ask you to create a local user. You can choose whatever username password you want because it will not gonna be deployed with your application.</p><p><img src="/assets/images/5FAuja_X8.jpeg" alt="strapi login" title="strapi-login.jpeg" loading="lazy"></p><p>Strapi Login</p><h2 id="setup-production-environment" tabindex="-1"><a class="direct-link" href="#setup-production-environment"><span>Setup Production Environment</span></a></h2><p>Before sending it to Heroku we need to set up <strong>production database</strong> configurations. By default, Strapi comes with a default config that works for your local setup but we need to do a bit more to make it production-ready.</p><p>You will find the local database configuration here: <code>./config/database.js</code>. Now we need to create another similar set for the production database. Let’s do some re-structuring of files.</p><p><img src="/assets/images/gycZqL1d3.jpeg" alt="directory" title="dir.jpeg" loading="lazy"></p><p>directory structure</p><p>Copy your <code>./config/database.js</code> file and put it into <code>./config/env/production/database.js</code>.</p><p>Now we have two <code>database.js</code> files. Please do the following changes to the <code>./config/env/production/database.js</code> file.</p><pre class="language-bash"><code class="language-bash"><span class="token comment"># you can now install the package to parse the database configs</span><br>$ <span class="token function">npm</span> i pg-connection-string</code></pre><pre class="language-bash"><code class="language-bash">const parse <span class="token operator">=</span> require<span class="token punctuation">(</span><span class="token string">"pg-connection-string"</span><span class="token punctuation">)</span>.parse<br>const config <span class="token operator">=</span> parse<span class="token punctuation">(</span>process.env.DATABASE_URL<span class="token punctuation">)</span><br><br>module.exports <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token function">env</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><br>  defaultConnection: <span class="token string">"default"</span>,<br>  connections: <span class="token punctuation">{</span><br>    default: <span class="token punctuation">{</span><br>      connector: <span class="token string">"bookshelf"</span>,<br>      settings: <span class="token punctuation">{</span><br>        client: <span class="token string">"postgres"</span>,<br>        host: config.host,<br>        port: config.port,<br>        database: config.database,<br>        username: config.user,<br>        password: config.password,<br>        ssl: <span class="token punctuation">{</span><br>          rejectUnauthorized: false,<br>        <span class="token punctuation">}</span>,<br>      <span class="token punctuation">}</span>,<br>      options: <span class="token punctuation">{</span><br>        ssl: true,<br>      <span class="token punctuation">}</span>,<br>    <span class="token punctuation">}</span>,<br>  <span class="token punctuation">}</span>,<br><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><p>In this <code>database.js</code> file we are accessing the <code>process.env</code> variable which will be available during the build process. Following will create a new environment variable in Heroku so it can be used during the deployment process.</p><p>This process of keeping configurations is secure since no one can see these values outside the Heroku logged user.</p><p>I believe you have Heroku already installed on your local if not you can follow the below commands:</p><pre class="language-bash"><code class="language-bash">$ brew tap heroku/brew <span class="token operator">&amp;&amp;</span> brew <span class="token function">install</span> heroku</code></pre><p>Or go to <a href="https://devcenter.heroku.com/articles/heroku-cli#download-and-install">Heroku</a> for instructions specific to your OS.</p><p>Once you have Heroku install, you can log in.</p><pre class="language-bash"><code class="language-bash">$ heroku login</code></pre><p>Create a new Heroku project</p><pre class="language-bash"><code class="language-bash">$ heroku create heroku-app-name</code></pre><p>Add the Heroku Postgres <a href="https://elements.heroku.com/addons/heroku-postgresql">add-on</a>:</p><pre class="language-bash"><code class="language-bash">$ heroku addons:create heroku-postgresql:hobby-dev --app heroku-app-name</code></pre><blockquote><p>You can check your Postgres configurations by triggering the following command.</p></blockquote><pre class="language-bash"><code class="language-bash">$ heroku config --app heroku-app-name<br><br><span class="token comment"># you will get a similar kind of string</span><br>DATABASE_URL:  postgres://<span class="token operator">&lt;</span>username<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>password<span class="token operator">&gt;</span>@<span class="token operator">&lt;</span>hostname<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>port<span class="token operator">&gt;</span>/<span class="token operator">&lt;</span>database_name<span class="token operator">&gt;</span></code></pre><p>You don’t have to worry to get these parameters since <code>pg-connection-string</code> will parse them for us.</p><h2 id="time-to-deploy" tabindex="-1"><a class="direct-link" href="#time-to-deploy"><span>Time to Deploy 🤞</span></a></h2><p>Deploy the project:</p><pre class="language-bash"><code class="language-bash"><span class="token comment"># connect heroku git repo</span><br>$ <span class="token function">git</span> init  <span class="token comment"># in if your directory is not git enabled</span><br>$ <span class="token function">git</span> remote <span class="token function">add</span> heroku https://git.heroku.com/your-app-name.git<br><br><span class="token comment"># add all your local changes to git</span><br>$ <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span><br><br><span class="token comment"># commit your changes</span><br>$ <span class="token function">git</span> commit -m <span class="token string">"initial commit"</span><br><br><span class="token comment"># you need to push your changes to heroku repository</span><br>$ <span class="token function">git</span> push heroku master</code></pre><p>Your application will be available here: <code>&lt;your-app-name&gt;.herokuapp.com/admin</code></p><p>You did it 👏🏻</p><h3 id="facing-problems" tabindex="-1"><a class="direct-link" href="#facing-problems"><span>Facing problems?</span></a></h3><p>Sometimes it doesn’t work on the first attempt, It would suggest following exactly the same steps I mentioned above. Still doesn’t work, let’s do this:</p><ul><li>Check if you can run the app on your local system.</li><li>Check your environment variable on Heroku <code>heroku config</code></li><li>If everything is fine then try check logs with <code>heroku logs --tail</code></li><li>In case it doesn’t work, leave your query in the comments or Google ;)</li></ul><p>Thanks for reading.</p></article><a target="_blank" class="text-teal-700 dark:text-teal-400 mt-4 inline-block" rel="noopener noreferrer" href="https://github.com/learnwithgurpreet/learnwithgurpreet/blob/main/src/posts/host-your-strapi-project.md">Edit post</a></section><section class="gap-1 p-1 my-5 lg:my-8 flex flex-col lg:flex-row justify-center lg:justify-between mx-5"><a class="flex-col items-start justify-center no-decoration" href="/posts/can-we-use-google-services-without-compromising-privacy/"><span class="text-sm uppercase">← Previous</span><h3>Can we use Google services without compromising privacy?</h3></a><a class="flex-col items-end justify-center text-right no-decoration" href="/posts/my-first-strapi-project-experience/"><span class="text-sm uppercase">Next →</span><h3>My first Strapi project experience</h3></a></section></main><footer class="w-full bg-gray-700 border-t-4 border-teal-600 text-gray-50 flex justify-between text-sm p-4"><span class="italic flex-grow">©2023 Gurpreet Singh</span><nav class="flex gap-2"><a rel="me" class="text-gray-50 underline" href="https://mastodon.social/@gsin" title="Link to my Mastodon page">mastodon</a> <a rel="me" class="text-gray-50 underline" href="https://github.com/learnwithgurpreet" title="Link to my Github page">github</a> <a rel="me" class="text-gray-50 underline" href="/feed/feed.xml" title="Link to my RSS feed">RSS</a></nav></footer></body></html>