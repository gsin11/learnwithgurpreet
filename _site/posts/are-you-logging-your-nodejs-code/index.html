<!doctype html><html lang="en"><head><meta charset="utf-8"><link rel="shortcut icon" href="/assets/favicons/favicon.ico"><link rel="icon" type="image/png" href="/assets/favicons/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="/assets/favicons/android-chrome-192x192.png" sizes="192x192"><link rel="icon" type="image/png" href="/assets/favicons/android-chrome-512x512.png" sizes="512x512"><link rel="apple-touch-icon" href="/assets/favicons/apple-touch-icon.png"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="color-scheme" content="light dark"><meta name="msapplication-TileColor" content="#F9FAFB"><meta name="theme-color" content="#F9FAFB"><title>Learn with Gurpreet - Are you logging your NodeJS code?</title><meta name="keywords" content="are you logging your nodejs code analysis, are you logging your nodejs code backend, best npm logger, how to check logs in node js, how to create error log file in node js, how to create logs in node js, how to do console log in node js, how to implement logger in node js, how to implement logs in nodejs api, how to implement logs in nodejs app, how to implement logs in nodejs backend, how to implement logs in nodejs example, how to implement logs in nodejs express, how to use console.log in node js, how to use log in node js, how to write log file in node.js, how to write logs in javascript, logging in node, logging in node.js, node.js logging, node.js logs"><meta name="description" content="Logs are an essential part of an application, it provides you deep level access of output comes from user inputs. When the application is in production"><meta name="og:image" content="https://learnwithgurpreet.com/assets/images/cover5.jpg"><meta name="og:title" content="Learn with Gurpreet - Are you logging your NodeJS code?"><meta name="og:description" content="Logs are an essential part of an application, it provides you deep level access of output comes from user inputs. When the application is in production"><meta name="og:url" content="https://learnwithgurpreet.com/posts/are-you-logging-your-nodejs-code/"><meta name="og:site_name" content="Learn with Gurpreet"><meta name="og:locale" content="en_GB"><meta name="og:type" content="article"><meta name="twitter:title" content="Learn with Gurpreet - Are you logging your NodeJS code?"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:description" content="Logs are an essential part of an application, it provides you deep level access of output comes from user inputs. When the application is in production"><meta name="twitter:image" content="https://learnwithgurpreet.com/assets/images/cover5.jpg"><meta name="generator" content="Eleventy v2.0.1"><meta itemprop="name" content="Learn with Gurpreet - Are you logging your NodeJS code?"><meta itemprop="description" content="Logs are an essential part of an application, it provides you deep level access of output comes from user inputs. When the application is in production"><link rel="stylesheet" href="/assets/css/styles.css?v=1681830158610"><link rel="alternate" href="https://learnwithgurpreet.com/feed/feed.xml" type="application/atom+xml" title="gS"><link rel="alternate" href="https://learnwithgurpreet.com/feed/feed.json" type="application/json" title="gS"><script>const prefDark = window.matchMedia('(prefers-color-scheme: dark)');
      document
        .querySelector('meta[name="theme-color"]')
        .setAttribute('content', prefDark ? '#111827' : '#F9FAFB');
      document
        .querySelector('meta[name="msapplication-TileColor"]')
        .setAttribute('content', prefDark ? '#111827' : '#F9FAFB');</script></head><body><main class="w-full mx-auto flex flex-grow flex-col post-content"><header class="flex flex-col my-5 max-w-7xl mx-auto w-full px-5"><div class="flex justify-between items-center gap-5 flex-col sm:flex-row mb-4 lg:mb-11"><a class="block font-semibold text-3xl text-teal-600 dark:text-teal-500" href="/">gS</a><nav><div class="fade flex gap-4 flex-wrap items-start justify-start"><a class="underline" href="/posts/">Posts</a> <a class="underline" href="/tags/">Tags</a> <a class="underline" href="/contact/">Contact</a> <a class="underline" href="/uses/">Uses</a> <a class="underline" href="/feed/feed.xml">RSS</a></div></nav></div></header><section class="items-center mb-6 gap-5 max-w-6xl mx-auto px-5 w-full"><h1>Are you logging your NodeJS code?</h1><div class="text-sm text-gray-600 my-5 flex flex-col lg:flex-row gap-3 dark:text-gray-200 border-b border-b-gray-600 dark:border-b-gray-200 pb-8"><date class="slash" datetime="2021-01-16">Jan 16, 2021</date><span class="slash">9 min read</span> <span class="slash"><span><span class="text-teal-600 dark:text-teal-400">#</span><a href="/tags/nodejs/">nodejs</a></span><span><span class="text-teal-600 dark:text-teal-400">#</span><a href="/tags/programming/">programming</a></span></span></div><picture><source type="image/jpeg" srcset="/assets/images/zrdWgqfuNE-learwithgurpreet-400w.jpeg 400w, /assets/images/zrdWgqfuNE-learwithgurpreet-640w.jpeg 640w" sizes="100vw"><source type="image/webp" srcset="/assets/images/zrdWgqfuNE-learwithgurpreet-400w.webp 400w, /assets/images/zrdWgqfuNE-learwithgurpreet-640w.webp 640w" sizes="100vw"><img alt="Photo by Christina on Unsplash" loading="lazy" decoding="async" class="featured-image" src="/assets/images/zrdWgqfuNE-learwithgurpreet-400w.jpeg" width="640" height="424"></picture><p class="text-center text-sm text-gray-600 dark:text-gray-200">Photo by Christina on Unsplash</p><h2>What's Inside</h2><aside class="my-8 toc-container"><nav class="toc"><ol><li><a href="#why-logs-are-important">Why Logs are important?</a><ol><li><a href="#avoid-using-console.log()">Avoid using console.log()</a></li><li><a href="#third-party-libraries">Third-party libraries</a></li><li><a href="#source-timestamps-context">Source, Timestamps, Context</a></li><li><a href="#logging-levels">Logging levels</a></li><li><a href="#what-shouldn't-be-part-of-logs">What shouldn‚Äôt be part of logs</a><ol><li><a href="#bad-example">Bad Example üö´</a></li><li><a href="#good-example">Good Example ‚úÖ</a></li></ol></li></ol></li><li><a href="#conclusion">Conclusion</a></li></ol></nav></aside><article><p>Logs are an essential part of an application, it provides you deep level access of output comes from user inputs. When the application is in production, logs are important to identify the problem if something goes wrong. If you are a developer, have you asked yourself a question, ‚ÄúAm I logging or not?‚Äù</p><h2 id="why-logs-are-important" tabindex="-1"><a class="direct-link" href="#why-logs-are-important"><span>Why Logs are important?</span></a></h2><p>No matter how careful we are while developing an application, it is quite difficult to make it 100% bug-free. Even after spending time to find defects in the test cycle, we still won‚Äôt be able to catch all of them.</p><p>These remaining errors may cause unexpected exceptions in a production environment. In some cases, your application might crash in certain user journeys. It is always a good idea to keep an extra eye on the application flow.</p><p>In order to achieve success, we use application logs to check why the application is behaving differently. For this, we have to set up our application to record information about its events and errors. This is what we call a logger, it helps us to identify problems with an application running in production.</p><blockquote><p>Best Practices</p></blockquote><h3 id="avoid-using-console.log()" tabindex="-1"><a class="direct-link" href="#avoid-using-console.log()"><span>Avoid using <code>console.log()</code></span></a></h3><p>There are some important things we need to consider while configuring logs in the application. Adding logs with <code>console.log()</code> won‚Äôt stay for a longer period of time. They are available till the time user refreshes the page. <code>console.log()</code> can be used for temporary logging since it provides in-memory logs which can be easily read through the terminal since it uses stdout. Similarly <code>console.error</code> or <code>console.warn</code> can also be used but you can‚Äôt store these logs into any file or database.</p><p>Hence, <code>console.log</code> doesn‚Äôt provide us enough options to use it as a primary logging system. You should consider the proper library to use as a logging system.</p><h3 id="third-party-libraries" tabindex="-1"><a class="direct-link" href="#third-party-libraries"><span>Third-party libraries</span></a></h3><p>Dedicated libraries unlike <code>console.log</code> provide us adequate options to define and configure the logging system.</p><ul><li>Levels: It offers different levels of logging, example you can use several levels of logging like, <code>info</code>, <code>warn</code>, <code>debug</code>, and <code>error</code>. This helps to filter the problems.</li><li>Appearance: You can use different colors and appearances to distinguish your logs. Data types: Not only appearance, but you can also make your logs different in type. Some libraries support JSON format as well.</li></ul><p><a href="https://www.npmjs.com/package/winston">Winston</a> and <a href="https://www.npmjs.com/package/bunyan">Bunyan</a> are two of the most popular logging libraries available for Node applications.</p><h3 id="source-timestamps-context" tabindex="-1"><a class="direct-link" href="#source-timestamps-context"><span>Source, Timestamps, Context</span></a></h3><p>Logging is not only to log text when exception or success comes, there are 3 important aspects that make them more useful when it comes to debugging.</p><ul><li>Source: While debugging the application through logs it is important to know what is the source of a particular log. Hence, it is important to keep, hostname, method, the module name.</li><li>Timestamps: Timestamps plays a very important role while debugging an application because it helps you to identify at what timeframe error happened. In the world of microservices, it is important to keep timestamps because requests are not sequential but async.</li><li>Context: These types of errors/exceptions come based on users‚Äô inputs. For example, when the user is trying to register in an application but registration failed due to he/she is already a registered user or provided email address is wrong etc. So, application behavior was expected but the user was not able to register.</li></ul><h3 id="logging-levels" tabindex="-1"><a class="direct-link" href="#logging-levels"><span>Logging levels</span></a></h3><p>Use different levels of logs to distinguish them, so developers can easily understand them while debugging the application.</p><ul><li>Emergency: the system is unusable</li><li>Alert: action must be taken immediately</li><li>Critical: critical conditions</li><li>Error: error conditions</li><li>Warning: warning conditions</li><li>Notice: normal but significant conditions</li><li>Informational: informational messages</li><li>Debug: debug-level messages</li></ul><p>You can still alter these levels upon your needs.</p><h3 id="what-shouldn't-be-part-of-logs" tabindex="-1"><a class="direct-link" href="#what-shouldn't-be-part-of-logs"><span>What shouldn‚Äôt be part of logs</span></a></h3><p>There are some obvious mistakes developers does while configuring loggings. One shouldn‚Äôt log any <a href="https://en.wikipedia.org/wiki/Personal_data">PII</a> data while logging requests or exceptions. I would like to share some bad and good examples of logging.</p><h4 id="bad-example" tabindex="-1"><a class="direct-link" href="#bad-example"><span>Bad Example üö´</span></a></h4><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"express"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> winston <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"winston"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// configuring logger</span><br><span class="token keyword">const</span> logger <span class="token operator">=</span> winston<span class="token punctuation">.</span><span class="token function">createLogger</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  <span class="token literal-property property">transports</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>    <span class="token keyword">new</span> <span class="token class-name">winston<span class="token punctuation">.</span>transports<span class="token punctuation">.</span>Console</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token keyword">new</span> <span class="token class-name">winston<span class="token punctuation">.</span>transports<span class="token punctuation">.</span>File</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">"combined.log"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>  <span class="token punctuation">]</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/user/add"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>  <span class="token keyword">try</span> <span class="token punctuation">{</span><br>    modal<br>      <span class="token punctuation">.</span><span class="token function">addUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>        <span class="token literal-property property">email</span><span class="token operator">:</span> req<span class="token punctuation">.</span>email<span class="token punctuation">,</span><br>        <span class="token literal-property property">password</span><span class="token operator">:</span> req<span class="token punctuation">.</span>pwd<span class="token punctuation">,</span><br>      <span class="token punctuation">}</span><span class="token punctuation">)</span><br>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>        logger<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>          <span class="token literal-property property">level</span><span class="token operator">:</span> <span class="token string">"info"</span><span class="token punctuation">,</span><br>          <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>email<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> with password </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pwd<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> has been successfully registered</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    logger<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>      <span class="token literal-property property">level</span><span class="token operator">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span><br>      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>email<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> with password </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pwd<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> wasn't registered</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h4 id="good-example" tabindex="-1"><a class="direct-link" href="#good-example"><span>Good Example ‚úÖ</span></a></h4><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"express"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> winston <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"winston"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// configuring logger</span><br><span class="token keyword">const</span> logger <span class="token operator">=</span> winston<span class="token punctuation">.</span><span class="token function">createLogger</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  <span class="token literal-property property">transports</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>    <span class="token keyword">new</span> <span class="token class-name">winston<span class="token punctuation">.</span>transports<span class="token punctuation">.</span>Console</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token keyword">new</span> <span class="token class-name">winston<span class="token punctuation">.</span>transports<span class="token punctuation">.</span>File</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">"combined.log"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>  <span class="token punctuation">]</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">"/user/add"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>  <span class="token keyword">try</span> <span class="token punctuation">{</span><br>    modal<br>      <span class="token punctuation">.</span><span class="token function">addUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>        <span class="token literal-property property">email</span><span class="token operator">:</span> req<span class="token punctuation">.</span>email<span class="token punctuation">,</span><br>        <span class="token literal-property property">password</span><span class="token operator">:</span> req<span class="token punctuation">.</span>pwd<span class="token punctuation">,</span><br>      <span class="token punctuation">}</span><span class="token punctuation">)</span><br>      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>        logger<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>          <span class="token literal-property property">level</span><span class="token operator">:</span> <span class="token string">"info"</span><span class="token punctuation">,</span><br>          <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Success: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> user has been successfully registered</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    logger<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>      <span class="token literal-property property">level</span><span class="token operator">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span><br>      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">An exception occurred while registering new user: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>err<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="conclusion" tabindex="-1"><a class="direct-link" href="#conclusion"><span>Conclusion</span></a></h2><p>All I can say that it is important to have a proper logging system set up in the application. This can make a developer‚Äôs life easier to debug any problem in the production environment with less turnaround time.</p></article><a target="_blank" class="text-teal-700 dark:text-teal-400 mt-4 inline-block" rel="noopener noreferrer" href="https://github.com/learnwithgurpreet/learnwithgurpreet/blob/main/src/posts/are-you-logging-your-nodejs-code.md">Edit post</a></section><section class="gap-1 p-1 my-5 lg:my-8 flex flex-col lg:flex-row justify-center lg:justify-between mx-5"><a class="flex-col items-start justify-center no-decoration" href="/posts/how-i-explained-web-designing-to-my-grandmother/"><span class="text-sm uppercase">‚Üê Previous</span><h3>How I explained Web designing to my Grandmother</h3></a><a class="flex-col items-end justify-center text-right no-decoration" href="/posts/can-we-use-google-services-without-compromising-privacy/"><span class="text-sm uppercase">Next ‚Üí</span><h3>Can we use Google services without compromising privacy?</h3></a></section></main><footer class="w-full bg-gray-700 border-t-4 border-teal-600 text-gray-50 flex justify-between text-sm p-4"><span class="italic flex-grow">¬©2023 Gurpreet Singh</span><nav class="flex gap-2"><a rel="me" class="text-gray-50 underline" href="https://mastodon.social/@gsin" title="Link to my Mastodon page">mastodon</a> <a rel="me" class="text-gray-50 underline" href="https://github.com/learnwithgurpreet" title="Link to my Github page">github</a> <a rel="me" class="text-gray-50 underline" href="/feed/feed.xml" title="Link to my RSS feed">RSS</a></nav></footer></body></html>